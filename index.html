<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kiosko Virtual</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>

  <!-- BotÃ³n ğŸ›’ flotante derecha -->
  <button id="verCarrito" class="carrito-btn-superior">
    ğŸ›’ Canasta (<span id="contadorCarrito">0</span>)
  </button>

  <!-- Ventana de productos en canasta debajo del botÃ³n -->
  <div id="canastaFija" class="canasta-fija oculto">
    <h3>ğŸ§º Productos en Canasta</h3>
    <ul id="listaCarrito"></ul>
    <p id="total">Total: Q0</p>
    <button onclick="finalizarCompra()" class="boton-comprar">âœ… Finalizar Compra</button>
  </div>

  <!-- Contenido principal -->
  <main class="contenedor">
    <h1>Kiosko Virtual</h1>

    <div class="botones">
      <button onclick="mostrarCategoria('comida')">ğŸ” Comida</button>
      <button onclick="mostrarCategoria('bebida')">ğŸ¥¤ Bebidas</button>
      <button onclick="mostrarCategoria('recuerdo')">ğŸ Recuerdos</button>
    </div>

    <div id="contenedor-productos" class="productos-grid"></div>

    <!-- ğŸ”½ Historial de Ventas -->
    <div style="margin-top: 60px;">
      <h3>ğŸ“œ Historial de Ventas</h3>
      <label for="filtroHistorial">Filtrar por:</label>
      <select id="filtroHistorial" onchange="mostrarHistorial()">
        <option value="1">Hoy</option>
        <option value="7">Ãšltimos 7 dÃ­as</option>
        <option value="30">Ãšltimos 30 dÃ­as</option>
      </select>

      <table class="historial-ventas">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody id="tablaHistorial"></tbody>
        <tfoot>
          <tr>
            <td colspan="3"><strong>Cierre de Caja</strong></td>
            <td id="cierreCaja">Q0.00</td>
          </tr>
        </tfoot>
      </table>
    </div>
    <!-- ğŸ”¼ Fin historial -->
  </main>

  <!-- ğŸ“¤ ExportaciÃ³n de ventas -->
  <div style="margin-top: 30px;">
    <h3>ğŸ“¤ Exportar Ventas por Rango</h3>
    <button onclick="exportarVentas(1)">ğŸ“… Hoy</button>
    <button onclick="exportarVentas(7)">ğŸ—“ï¸ Ãšltimos 7 dÃ­as</button>
    <button onclick="exportarVentas(30)">ğŸ“† Ãšltimos 30 dÃ­as</button>
  </div>

  <!-- ğŸ”§ SecciÃ³n para actualizar stock -->
  <div class="contenedor" style="margin-top: 60px;">
    <h3>ğŸ› ï¸ AdministraciÃ³n de Stock</h3>

    <div>
      <label for="productoStock">ID del producto:</label>
      <input type="text" id="productoStock" placeholder="Ej. comida1">

      <label for="nuevoStock">Nuevo stock:</label>
      <input type="number" id="nuevoStock" min="0" placeholder="Ej. 100">

      <button onclick="actualizarStockProducto()">ğŸ“¦ Actualizar Stock</button>
    </div>

    <p id="resultadoStock" style="margin-top: 10px; font-weight: bold;"></p>
  </div>

  <!-- Script principal -->
  <script src="main.js"></script>
</body>
</html>
